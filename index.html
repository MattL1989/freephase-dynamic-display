<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EDF FreePhase Dynamic</title>
<style>
  body {
    background: #000;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  .band {
    width: 90%;
    margin: 20px auto;
    padding: 20px;
    font-size: 32px;
    border-radius: 12px;
    color: white;
  }
  .green { background: #1f8f2e; }
  .amber { background: #c9a200; }
  .red { background: #b00000; }
  h1, h2 { margin: 30px; }
</style>
</head>
<body>

<h1>West Midlands</h1>

<h2>Today</h2>
<div id="today-green" class="band green"></div>
<div id="today-amber" class="band amber"></div>
<div id="today-red" class="band red"></div>

<h2>Tomorrow</h2>
<div id="tomorrow-green" class="band green"></div>
<div id="tomorrow-amber" class="band amber"></div>
<div id="tomorrow-red" class="band red"></div>

<script>
function formatTime(iso) {
  const d = new Date(iso);
  return d.toLocaleTimeString("en-GB", { hour: "2-digit", minute: "2-digit" });
}

fetch("data.json")
  .then(r => r.json())
  .then(data => {
    ["today", "tomorrow"].forEach(day => {
      ["green", "amber", "red"].forEach(band => {
        const item = data[day][band];
        if (!item) return;

        const el = document.getElementById(`${day}-${band}`);
        el.innerHTML = `${band.toUpperCase()} â€“ ${item.price.toFixed(2)}p<br>${formatTime(item.start)} to ${formatTime(item.end)}`;
      });
    });
  });
</script>

</body>
</html>
